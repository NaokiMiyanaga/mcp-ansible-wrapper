# playbooks/show_bgp.yml
- name: Show BGP (minimal JSON)
  hosts: all
  gather_facts: no
  tasks:
    - name: Build minimal BGP payload
      set_fact:
        _bgp_payload:
          host: "{{ inventory_hostname }}"
          bgp:
            peers:
              "10.0.0.1":
                state: "Established"
                remoteAs: 65001
                pfxRcd: 42

    - name: Emit JSON for BGP
      debug:
        # パーサがそのまま拾える純JSON
        msg: "{{ _bgp_payload | to_json }}"
